/* modals.css
   Modal overlays and modal content used by TimerSetupModal and other overlays
*/

.modal-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(15,23,42,0.35);
  padding: calc(var(--spacing-md) + 8px);
  z-index: 1200;
  -webkit-overflow-scrolling: touch;
}

/* Modal content (the white card inside the overlay) */
.modal-overlay .modal-content {
  background: var(--card-bg);
  width: 100%;
  max-width: 640px;
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(2,6,23,0.18);
  padding: var(--spacing-md);
  overflow: auto;
  max-height: calc(100vh - 120px);
  position: relative;

  /* Prevent transformed ancestors from affecting native select popup positioning.
     Some browsers position the native select dropdown relative to the nearest
     transformed ancestor which can cause the popup to render in the wrong place.
     Explicitly reset transform/backface visibility here so the select's menu
     appears correctly aligned to the control. */
  transform: none;
  -webkit-transform: none;
  -webkit-backface-visibility: visible;
  z-index: 1300;
}

/* Header / close button */
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}
.modal-close-btn {
  background: transparent;
  border: none;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  color: var(--text-secondary);
  padding: 6px;
  border-radius: 8px;
}
.modal-close-btn:hover {
  background: rgba(0,0,0,0.04);
  color: var(--text-primary);
}

/* Body and footer spacing */
.modal-body {
  padding-top: 6px;
  padding-bottom: 12px;
  display: grid;
  gap: 12px;
}

/* Form groups inside modals: align label and control in two columns */
.modal-body .form-group {
  display: grid;
  grid-template-columns: 1fr 160px;
  align-items: center;
  gap: 12px;
  padding: 6px 0;
}

/* Label styling - keep left column aligned */
.modal-body .form-group label {
  margin: 0;
  font-weight: 600;
  color: var(--text-primary);
}

/* Inputs / selects sit in the right column and size consistently */
.modal-body .form-group input[type="number"],
.modal-body .form-group select {
  justify-self: start;
  width: 110px;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(2,6,23,0.06);
  background: var(--card-bg);
  font-size: 16px;
  color: var(--text-primary);

  /* Ensure the native select menu is positioned above the modal and not clipped
     by other stacking contexts. Keeping the select itself positioned relative
     ensures the browser can anchor the popup correctly. */
  position: relative;
  z-index: 1400;
  -webkit-transform: none;
  transform: none;
}

/* Small helper text should flow below the two columns */
.modal-body .form-group small {
  grid-column: 1 / -1;
  margin-top: 6px;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 400;
}

/* Footer - keep buttons aligned to the right and size consistent */
.modal-footer {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  padding-top: 8px;
}

/* Make primary/secondary modal buttons visually consistent */
.modal-footer .btn-primary,
.modal-footer .btn-secondary {
  min-width: 140px;
  padding: 10px 18px;
  border-radius: 10px;
}

/* Responsive: stack labels and controls on narrow viewports */
@media (max-width: 480px) {
  .modal-body .form-group {
    grid-template-columns: 1fr;
  }
  .modal-body .form-group input[type="number"],
  .modal-body .form-group select {
    width: 100%;
    justify-self: stretch;
  }
}

/* Keep the JS-driven hidden helper in sync for the modal variant */
.timer-setup-modal.hidden { display: none !important; }

/* Ensure bottom nav sits under overlays (in case other components set z-index) */
.bottom-nav {
  z-index: 200;
}
